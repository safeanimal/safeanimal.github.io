---
import { projects } from '@data/projects';
import { ProjectSorter } from '@utils/sorters';
import ProjectCard from '@components/Research/ProjectCard.astro';

interface Props {
  featured?: boolean;
  limit?: number;
}

const { featured = false, limit } = Astro.props;

let projectList = featured 
  ? projects.filter(proj => proj.featured)
  : projects;

projectList = ProjectSorter.byDate(projectList);

if (limit) {
  projectList = projectList.slice(0, limit);
}
---

<div class="projects-grid">
  {projectList.map((project) => (
    <ProjectCard project={project} />
  ))}
</div>

<style>
  .projects-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
    gap: var(--spacing-6);
  }

  @media (max-width: 768px) {
    .projects-grid {
      grid-template-columns: 1fr;
    }
  }
</style>

